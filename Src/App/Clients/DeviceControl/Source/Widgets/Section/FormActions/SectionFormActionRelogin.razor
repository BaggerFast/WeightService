@using Blazor.Heroicons.Outline
@using Microsoft.FluentUI.AspNetCore.Components
@using DeviceControl.Source.Shared.Auth.ClaimsTransform.CacheProviders.Common
@using Microsoft.Extensions.Localization
@using Ws.Domain.Models.Entities.Users
<SectionFormAction OnClick="@ReloginUser">
  <UserIcon class="size-4 mr-2" />
  @Localizer["FormActionRelogin"]
</SectionFormAction>

@code {
  [Inject] private IStringLocalizer<ApplicationResources> Localizer { get; set; } = default!;
  [Inject] private IClaimsCacheProvider ClaimsCacheProvider { get; set; } = default!;
  [Inject] private IToastService ToastService { get; set; } = default!;

  [Parameter,EditorRequired] public User User { get; set; } = null!;

  private Task ReloginUser()
  {
    ClaimsCacheProvider.ClearCacheByUserName(User.Name);
    ToastService.ShowSuccess(Localizer["ToastReloginUser"]);
    return Task.CompletedTask;
  }
}