@using Blazor.Heroicons.Outline

<div class="flex items-center w-full px-2 h-full">
  <div class="flex overflow-hidden flex-col w-full h-[30rem] border border-black/[.1] rounded-xl bg-white shadow-lg">
    @if (LineContext.Plu.IsNew)
    {
      <div class="flex w-full h-full items-center justify-center">
        <p class="text-center text-2xl">Выберите ПЛУ</p>
      </div>
    }
    else
    {
      <div class="flex overflow-hidden items-center justify-center w-full h-14 px-4 border-b border-b-black/[.1]">
        <p class="text-2xl truncate text-center">
          @LineContext.Plu.DisplayName
        </p>
      </div>
      <ul class="flex overflow-hidden justify-around flex-col h-full w-full px-8 py-4">
        <li>
          <KneadingDisplayWeightItem Label="@Localizer["KneadingDisplayNetWeightLabel"]">
            @if (IsDisconnected)
            {
              <p class="text-2xl">Весы отключены</p>
            }
            else
            {
              <div class="text-[2.5rem] flex items-end mx-auto px-4 border border-black/[.1] bg-gray-50 text-center
                           rounded-md overflow-hidden @(!IsStable || GetNetWeight <= 0 ? "text-red-400" : "text-green-400")">
                <span class="w-6 flex justify-center">@Sign</span>
                @foreach (char intChar in IntegerPart)
                {
                  <span class="w-6 flex justify-center">@intChar</span>
                }
                <span>,</span>
                @foreach (char decChar in DecimalPart)
                {
                  <span class="w-6 flex justify-center">@decChar</span>
                }
                <span>@Localizer["WeightMeasureKilogram"]</span>
              </div>
            }
          </KneadingDisplayWeightItem>
        </li>
        <li>
          <KneadingDisplayWeightItem Label="@Localizer["KneadingDisplayTareWeightLabel"]">
            <p class="text-3xl font-bold truncate">
              @GetTareWeight @Localizer["WeightMeasureKilogram"]
            </p>
          </KneadingDisplayWeightItem>
        </li>
        <li>
          <KneadingDisplayWeightItem Label="@Localizer["KneadingDisplayPluNestingLabel"]">
            <p class="text-3xl font-bold truncate">
              @GetFormattedPluNestingName()
            </p>
          </KneadingDisplayWeightItem>
        </li>
        <li>
          <KneadingDisplayWeightItem Label="@Localizer["KneadingDisplayDateLabel"]">
            <div class="flex overflow-hidden w-full h-full">
              <button
                type="button"
                class="bg-gray-100 border border-black/[.1] w-1/4 flex items-center justify-center h-full rounded-md
                        overflow-hidden hover:bg-sky-400"
                @onclick="DecreaseDate"
              >
                <ChevronLeftIcon class="h-10 w-10" />
              </button>
              <p class="text-3xl w-1/2 flex items-center justify-center font-bold truncate">
                @LineContext.KneadingModel.ProductDate.ToString("dd-MM-yyyy")
              </p>
              <button
                type="button"
                class="bg-gray-100 border border-black/[.1] w-1/4 flex items-center justify-center h-full rounded-md
                        overflow-hidden hover:bg-sky-400"
                @onclick="IncreaseDate"
              >
                <ChevronRightIcon class="h-10 w-10" />
              </button>
            </div>
          </KneadingDisplayWeightItem>
        </li>
        <li>
          <KneadingDisplayWeightItem Label="@Localizer["KneadingDisplayKneadingLabel"]">
            <div class="flex items-center w-full h-full">
              <div class="w-1/4 h-full"></div>
              <p class="text-3xl flex items-center justify-center w-2/4 font-bold truncate">
                @LineContext.KneadingModel.KneadingCount
              </p>
              <button
                type="button"
                @onclick="ShowCalculatorDialog"
                class="bg-gray-100 border border-black/[.1] w-1/4 flex items-center justify-center h-full rounded-md
                        overflow-hidden hover:bg-sky-400"
              >
                <p class="text-2xl">@Localizer["ButtonCalculatorEnter"]</p>
              </button>
            </div>
          </KneadingDisplayWeightItem>
        </li>
      </ul>
    }
  </div>
</div>

<DialogCalculator @ref="CalculatorRef" CallbackFunction="@SetNewKneading" />