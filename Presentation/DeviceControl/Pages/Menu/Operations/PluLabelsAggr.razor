@page "/section/plus_labels_aggr"
@attribute [Authorize(Roles = UserAccessStr.Read)]
@using Ws.StorageCore.Views.ViewPrintModels.PluLabelAggr
@using DeviceControl.Components.Rz
@using Ws.Shared.TypeUtils
@using Ws.Shared.Utils
@inherits ComponentBase

<MudPaper Outlined="true" Class="mb-2">
  <MudToolBar Dense="true">
    <RadzenLabel Style="font-size: 15px;" Text="@Locale.SectionWeithingFactsAggregation"/>
    <RadzenButton
      Icon="refresh"
      ButtonStyle="@ButtonStyle.Primary"
      Style="margin-left: 20px; width: 60px;"
      Size="@ButtonSize.Small"
      Click="@GetSectionData"/>
    <RadzenLabel Style="margin-left: 20px; font-size: 13px; " Text="@SqlListCountResult"/>
    <RadzenLabel Style="margin-left: 20px; font-size: 13px; " Text="@GetAverageCountResult"/>
  </MudToolBar>
</MudPaper>

<RzDataGrid
  TItem="@SqlViewPluLabelAggrModel"
  Data="@PluWeightAggrs">
  <Columns>
    <TItemContent TItem="@SqlViewPluLabelAggrModel">
      <RadzenDataGridColumn Title="@Locale.CreateDt" Property="CreateDt" Width="15%" FormatString="@StrUtils.FormatDtShort"/>
      <RadzenDataGridColumn TItem="@SqlViewPluLabelAggrModel" Title="@Locale.DayOfWeek" SortProperty="CreateDt.DayOfWeek" Width="15%">
        <Template Context="itemCast">
          @GetDayOfWeekRu(itemCast.CreateDt.DayOfWeek)
        </Template>
      </RadzenDataGridColumn>
      <RadzenDataGridColumn Title="@Locale.WithoutWeightCount" Property="WithoutWeightCount" Width="15%"/>
      <RadzenDataGridColumn Title="@Locale.WeightCount" Property="WeightCount" Width="15%"/>
      <RadzenDataGridColumn Title="Всего" Property="TotalCount" Width="15%" />
    </TItemContent>
  </Columns>
</RzDataGrid>