@using Ws.Domain.Models.Entities.Ref1c
@using Ws.Domain.Models.Entities.Scale
@using ButtonType = ScalesDesktop.Features.Shared.ButtonType


<EditForm
  Model="FormModel"
  OnValidSubmit="OnSubmit"
  OnInvalidSubmit="HandleInvalidForm"
  class="max-w-md mx-auto w-full flex flex-col space-y-4"
>
  <DataAnnotationsValidator />
  <CreateFormInputWrapper Label="Склад" HtmlFor="warehouse">
    <SharedInputText
      id="warehouse"
      Value="@LineContext.Line.Warehouse.Name"
      disabled
    />
  </CreateFormInputWrapper>
  <CreateFormInputWrapper Label="ПЛУ" HtmlFor="plu">
    <SharedSelectSingle
      TItem="PluEntity"
      @bind-SelectedItem="@FormModel.Plu"
      @bind-SelectedItem:after="SetPluNestings"
      Items="GetAllPlus()"
      IsFilterable
    />
  </CreateFormInputWrapper>
  <CreateFormInputWrapper Label="Вложенность" HtmlFor="nesting">
    <SharedSelectSingle
      TItem="PluNestingEntity"
      @bind-SelectedItem="FormModel.Nesting"
      @bind-Items="PluNestings"
    />
  </CreateFormInputWrapper>
  <CreateFormInputWrapper Label="Вес паллеты" HtmlFor="pallet-weight">
    <SharedInputNumber
      TValue="decimal"
      id="pallet-weight"
      step="0.001"
      placeholder="Введите вес палетты..."
      @bind-Value="FormModel.PalletWeight"
    />
    </CreateFormInputWrapper>
  <CreateFormInputWrapper Label="Дата создания" HtmlFor="create-dt">
    <SharedInputDate
      id="create-dt"
      TValue="DateOnly"
      @bind-Value="FormModel.CreateDt"
    />
  </CreateFormInputWrapper>
  <CreateFormInputWrapper Label="Количество" HtmlFor="count">
    <SharedInputNumber
      TValue="int"
      id="count"
      step="1"
      placeholder="Введите количество..."
      @bind-Value="FormModel.Count"
    />
  </CreateFormInputWrapper>
  <SharedButton Type="ButtonType.Submit" class="!mt-8 !mb-2" >
    Создать
  </SharedButton>
</EditForm>