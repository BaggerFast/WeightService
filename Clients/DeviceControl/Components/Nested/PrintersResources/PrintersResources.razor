@attribute [Authorize(Roles = UserAccessStr.Read)]
@using DeviceControl.Components.Section
@using DeviceControl.Components.Rz
@using DeviceControl.Utils
@using WsStorageCore.Tables.TableScaleFkModels.PrintersResourcesFks
@inherits SectionBase<WsStorageCore.Tables.TableScaleFkModels.PrintersResourcesFks.WsSqlPrinterResourceFkModel>

@if (SqlSectionCast.Count > 0)
{
  <SectionTopBar
    Title="@WsLocaleCore.Print.Resources"
    OnSectionUpdate="@GetSectionData"
    OnSectionAdd="@SqlItemNewAsync"
    SectionCount="@SqlSectionCast.Count"
    SqlCrudConfigSection="@SqlCrudConfigSection"
  IsGuiShowFilterMarked="@IsGuiShowFilterMarked"
    ButtonSettings="@ButtonSettings"/>

  <RzDataGrid
    TItem="@WsSqlPrinterResourceFkModel"
    @ref="@DataGrid"
    @bind-Value="@SelectedRow"
    Data="@SqlSectionCast"
    CellContextMenu="@OnCellContextMenu"
    RowSelect="@SqlItemSet"
    RowDoubleClick="@SqlItemOpenAsync">
    <Columns>
      <TItemContent TItem="@WsSqlPrinterResourceFkModel">
        <SectionIsMarked SqlCrudConfigSection="@SqlCrudConfigSection"/>
        <RadzenDataGridColumn Title="@WsLocaleCore.Table.Name" Property="Printer.Name" Width="32%"/>
        <RadzenDataGridColumn Title="@WsLocaleCore.Print.TemplateResource" Property="TemplateResource.Name" Width="32%"/>
      </TItemContent>
    </Columns>
  </RzDataGrid>
}
else
{
  <h3>У принтера не загружены ресурсы</h3>
}