@page "/section/plus_weighings_aggr"
@attribute [Authorize(Roles = UserAccessStr.Read)]
@using WsStorageCore.TableScaleFkModels.Aggregations
@using WsDataCore.Utils
@using DeviceControl.Components.Rz
@inherits LayoutComponentBase

<MudPaper Outlined="true" Class="mb-2">
  <MudToolBar Dense="true">
    <RadzenLabel Style="font-size: 15px;" Text="@LocaleCore.DeviceControl.SectionWeithingFactsAggregation"/>
    <RadzenCheckBox TValue="bool" @bind-Value="@IsShowPlu" Style="margin-left: 20px " />
    <RadzenLabel Style="font-size: 13px; margin-left: 5px" Text="Учитывать плу"/>
    <RadzenButton
      id="button_loader"
      Icon="refresh"
      ButtonStyle="@ButtonStyle.Primary"
      Style="margin-left: 20px; width: 60px;"
      Size="@ButtonSize.Small"
      Click="@GetSectionData"/>
    <RadzenLabel Style="margin-left: 20px; font-size: 13px; " Text="@SqlListCountResult"/>
  </MudToolBar>
</MudPaper>

<RzDataGrid
  TItem="@WsSqlPluAggrModel"
  Data="@PluWeightAggrs">
  <Columns>
    <TItemContent TItem="@WsSqlPluAggrModel">
      <RadzenDataGridColumn Title="@LocaleCore.Table.WeighDt" Property="ChangeDt" Width="15%" FormatString="@StrUtils.FormatDtShort"/>
      <RadzenDataGridColumn TItem="@WsSqlPluAggrModel" Title="@LocaleCore.Table.DayOfWeek" SortProperty="ChangeDt.DayOfWeek" Width="15%">
        <Template Context="itemCast">
          @EnumUtils.GetDayOfWeekRu(itemCast.ChangeDt.DayOfWeek)
        </Template>
      </RadzenDataGridColumn>
      <RadzenDataGridColumn Title="@LocaleCore.Table.Count" Property="Count" Width="15%"/>
      <RadzenDataGridColumn Title="@LocaleCore.Table.Line" Property="Line" Width="20%"/>
      <RadzenDataGridColumn Title="@LocaleCore.Table.Plu" Property="Plu" Width="30%" Visible="@IsShowPlu" />
    </TItemContent>
  </Columns>
</RzDataGrid>