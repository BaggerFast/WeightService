@page "/section/logs_memory_chart"
@attribute [Authorize(Roles = WsUserAccessStr.Admin)]
@using WsDataCore.Utils
@using DeviceControl.Components.Section
@using DeviceControl.Components.Rz
@using DeviceControl.Utils
@using WsStorageCore.Views.ViewDiagModels.LogsMemory
@inherits SectionBase<WsStorageCore.Views.ViewDiagModels.LogsMemory.WsSqlViewLogMemoryModel>

<RadzenCard class="w-100 mb-4" Style="display: flex; align-items: center; gap: 0.5rem">
  <RadzenLabel Text="Interpolation" For="interpolation" Style="margin-right: 1rem;"/>
  <RadzenDropDown
    AllowClear="false" Name="interpolation" @bind-Value="@WsInterpolation"
    TValue="Interpolation" ValueProperty="Value" TextProperty="Text"
    Data="@(Enum.GetValues<Interpolation>().Select(v => new { Value = v, Text = $"{v:G}" }))"/>
</RadzenCard>

<RadzenChart>
  <RadzenAreaSeries
    Interpolation="@WsInterpolation" Data="@ArraySizeApp" CategoryProperty="Date"
    Title="@WsLocaleCore.DeviceControl.MemoryChartValue" ValueProperty="Value" />
  <RadzenLineSeries LineType="LineType.Dashed"
    Interpolation="@WsInterpolation" Data="@ArraySizeFree" CategoryProperty="Date"
    Title="@WsLocaleCore.DeviceControl.MemoryChartSummary" ValueProperty="Value" />
    <RadzenValueAxis Formatter="@WsDataUtils.FormatCurrencyAsUsd">
    @*<RadzenCategoryAxis Padding="20" Formatter="@WsDataUtils.FormatAsMonth" />*@
    <RadzenCategoryAxis Padding="20" />
    <RadzenGridLines Visible="true"/>
    <RadzenAxisTitle Text="@WsLocaleCore.DeviceControl.MemoryChartLeft"/>
  </RadzenValueAxis>
</RadzenChart>
