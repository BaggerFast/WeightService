@typeparam T
@inherits BlazorCore.Models.RazorPageSectionBase<T>
@page "/action/section_reload"
@using DataCore.Sql.Core

<MudPaper Width="100%" Height="32px" Style="margin-bottom: 30px;" Square=false>
	<MudSimpleTable Style="overflow-x: auto; margin-top: -10px; " Dense=true Bordered=false FixedHeader=false>
		<thead>
		<tr>
			<th style="color:blue; font-weight: normal; width: 60%; "></th>
			<th style="color:blue; font-weight: normal; width: 10%; "></th>
			<th style="color:blue; font-weight: normal; width: 30%; "></th>
		</tr>
		</thead>
		<tbody>
		<tr>
			<td colspan=@(RazorConfig.IsShowFilterAdditional ? 1 : 3) >
				@if (ParentRazor is null)
				{
					<ActionsLoad ParentRazor=@(this) DataLoadItem=ActionLoadEnum.Loading IsShowProgress=true />
				}
				else
				{
					<RadzenLabel Style="margin-top: 3px; margin-left: 1%; font-size: 12px; " Text=@Title />
					@if (RazorConfig.IsShowFilterOnlyTop)
					{
						<RadzenCheckBox Disabled=false TValue="bool" @bind-Value=@RazorConfig.IsShowOnlyTop
							Change=@(args => OnChangeCheckBox(args, nameof(RazorConfig.IsShowOnlyTop)))
						    Style="margin-top: -3px; margin-left: 20px; " />
						<RadzenLabel Style="margin-top: 0; margin-left: 5px; font-size: 11px; " 
						    Text=@LocaleCore.Action.ActionIsSelectTopRowsCount(AppSettings.DataAccess.JsonSettingsLocal.SelectTopRowsCount) />
					}
					@if (RazorConfig.IsShowFilterMarked)
					{
						<RadzenCheckBox Disabled=false TValue="bool" @bind-Value=@RazorConfig.IsShowMarked
							Change=@(args => OnChangeCheckBox(args, nameof(RazorConfig.IsShowMarked)))
						    Style="margin-top: -3px; margin-left: 20px; " />
						<RadzenLabel Style="margin-top: 0; margin-left: 5px; font-size: 11px; " Text=@LocaleCore.Action.ActionIsShowMarked />
					}
					<RadzenButton Icon="refresh" ButtonStyle=@ButtonStyle.Primary
						Style="margin-top: -3px; margin-left: 20px; width: 60px; height: 26px; "
						Disabled=@(!AppSettings.DataAccess.IsConnected()) Click=@(_ => ParentRazor.OnChange()) />
					<RadzenLabel Style="margin-top: 3px; margin-left: 20px; font-size: 11px; " Text=@ItemsCountResult />
				}
			</td>
			@if (RazorConfig.IsShowFilterAdditional)
			{
				<td>
					<RadzenLabel Style="margin-top: 1px; font-size: 11px; text-align: center; height: 100%; " Text=@Title />
@*					@switch (FilterTable)
					{
						case SqlTableScaleEnum.Scales:
							<RadzenLabel Style="margin-top: 1px; font-size: 11px; text-align: center; height: 100%; "
							             Text=@LocaleCore.Table.Scale/>
							break;
					}*@
				</td>
				<td>
					<SectionFilter T=T ParentRazor=@(this) />
					@*@switch (FilterTable)
					{
						case SqlTableScaleEnum.Scales:
							break;
					}*@
				</td>
			}
		</tr>
		</tbody>
    </MudSimpleTable>
</MudPaper>
