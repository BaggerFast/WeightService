@inherits RazorComponentSectionBase<DataCore.Sql.TableScaleModels.PlusScales.PluScaleModel, DataCore.Sql.TableScaleModels.Scales.ScaleModel>
@page "/section/plus_scales"
@using BlazorCore.Razors
@using BlazorDeviceControl.Razors.SystemComponents
@using DataCore.Sql.TableScaleModels.PlusScales
@using DataCore.Sql.TableScaleModels.Scales

<RazorSectionReload TItem=@PluScaleModel TItemFilter=@ScaleModel ParentRazor=@(this) Title=@LocaleCore.DeviceControl.SectionPlusScales />

<RadzenGrid 
	PagerHorizontalAlign=@HorizontalAlign.Justify
	Style="margin-top: 5px;"
	Data=@SqlSectionCast TItem=@PluScaleModel
	RowClick=@(RowClick) RowRender=@(RowRender)
	RowDoubleClick=@(_ => SqlItemEditAsync())
	AllowPaging=true PageSize=@DataAccess.JsonSettings.Local.SectionRowsCount >
    <Columns>
		<RazorSectionFieldIsMarked TItem=@PluScaleModel ParentRazor=@(this) />
		<RadzenGridColumn TItem=@PluScaleModel Width="45%" TextAlign=@TextAlign.Left Title=@LocaleCore.Table.Plu>
			<Template Context="itemCast">
				<RadzenLink 
					Text=@itemCast.Plu.Name
					Path=@($"{LocaleCore.DeviceControl.RouteItemPlu}/{itemCast.Plu.IdentityValueUid}") />
			</Template>
		</RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.NumberShort>
		    <Template Context="itemCast">
			    <RadzenLink 
				    Text=@itemCast.Plu.Number.ToString()
					Path=@($"{LocaleCore.DeviceControl.RouteItemPlu}/{itemCast.Plu.IdentityValueUid}") />
		    </Template>
	    </RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.Active>
		    <Template Context="itemCast">
			    <RadzenCheckBox Disabled=false TValue="bool" @bind-Value=@itemCast.IsActive/>
		    </Template>
	    </RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.WeightShort>
		    <Template Context="itemCast">
			    <RadzenCheckBox Disabled=true TValue="bool" @bind-Value=@itemCast.Plu.IsCheckWeight/>
		    </Template>
	    </RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.ShelfLifeDaysShort>
		    <Template Context="itemCast">
			    <RadzenLabel Style="white-space: pre-wrap;" Text=@itemCast.Plu.ShelfLifeDays.ToString()/>
		    </Template>
	    </RadzenGridColumn>
	    @*<RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.PackageWeightShort>
		    <Template Context="itemCast">
			    <RadzenLabel Style="white-space: pre-wrap;" Text=@itemCast.Plu.WeightTare.ToString(CultureInfo.InvariantCulture)/>
		    </Template>
	    </RadzenGridColumn>*@
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.PluPackage>
		    <Template Context="itemCast">
			    <RadzenLabel 
				    Style="white-space: pre-wrap;"
					Text=@(GetPluPackagesCount(itemCast.Plu)) />
		    </Template>
	    </RadzenGridColumn>
    </Columns>
</RadzenGrid>

<RazorSectionActions TItem="@PluScaleModel" ButtonSettings="@ButtonSettings" ParentRazor=@(this) />