@inherits RazorComponentSectionBase<PluScaleModel, ScaleModel>
@page "/section/plus_scales"
@using BlazorCore.Razors
@using BlazorDeviceControl.Razors.SystemComponents

<SystemIdentity ParentRazor=@(this) />

<RazorSectionReload TItem=@PluScaleModel TItemFilter=@ScaleModel ParentRazor=@(this) Title=@LocaleCore.DeviceControl.SectionPlusScales />

<RadzenGrid PagerHorizontalAlign=@HorizontalAlign.Justify
			Style="margin-top: 5px;"
	Data=@SqlItemsCast TItem=@PluScaleModel
	RowClick=@(SqlItemSetAsync) RowRender=@(args => RowRender(args))
	RowDoubleClick=@(_ => SqlItemEditAsync())
    AllowFiltering=true FilterCaseSensitivity=FilterCaseSensitivity.CaseInsensitive FilterMode="FilterMode.Advanced"
    AllowPaging=true PageSize=@AppSettings.DataAccess.JsonSettingsLocal.SectionRowsCount AllowSorting=true >
    <Columns>
		<RazorSectionFieldIsMarked TItem=@PluScaleModel ParentRazor=@(this) />
@*		<RadzenGridColumn TItem=@PluScaleModel Width="25%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.PluScale>
			<Template Context="itemCast">
				<RadzenLink 
					Text=@itemCast.IdentityValueUid.ToString()
		Path=@($"{LocaleCore.DeviceControl.RouteItemPluScale}/{itemCast.IdentityValueUid}") />
			</Template>
		</RadzenGridColumn>*@
		<RadzenGridColumn TItem=@PluScaleModel Width="45%" TextAlign=@TextAlign.Left Title=@LocaleCore.Table.Plu>
			<Template Context="itemCast">
				<RadzenLink 
					Text=@itemCast.Plu.Name
							Path=@($"{LocaleCore.DeviceControl.RouteItemPlu}/{itemCast.Plu.IdentityValueUid}") />
			</Template>
		</RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.NumberShort>
		    <Template Context="itemCast">
			    <RadzenLink 
				    Text=@itemCast.Plu.Number.ToString()
							Path=@($"{LocaleCore.DeviceControl.RouteItemPlu}/{itemCast.Plu.IdentityValueUid}") />
		    </Template>
	    </RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.Active>
		    <Template Context="itemCast">
			    <RadzenCheckBox Disabled=false TValue="bool" @bind-Value=@itemCast.IsActive/>
		    </Template>
	    </RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.WeightShort>
		    <Template Context="itemCast">
			    <RadzenCheckBox Disabled=true TValue="bool" @bind-Value=@itemCast.Plu.IsCheckWeight/>
		    </Template>
	    </RadzenGridColumn>
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.ShelfLifeDaysShort>
		    <Template Context="itemCast">
			    <RadzenLabel Style="white-space: pre-wrap;" Text=@itemCast.Plu.ShelfLifeDays.ToString()/>
		    </Template>
	    </RadzenGridColumn>
	    @*<RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.PackageWeightShort>
		    <Template Context="itemCast">
			    <RadzenLabel Style="white-space: pre-wrap;" Text=@itemCast.Plu.TareWeight.ToString(CultureInfo.InvariantCulture)/>
		    </Template>
	    </RadzenGridColumn>*@
	    <RadzenGridColumn TItem=@PluScaleModel Width="10%" TextAlign=@TextAlign.Center Title=@LocaleCore.Table.PluPackage>
		    <Template Context="itemCast">
			    <RadzenLabel 
				    Style="white-space: pre-wrap;" 
			        Text=@(AppSettings.DataAccess.GetListPluPackages(
						itemCast.Plu, false, false, false).Count.ToString()) />
		    </Template>
	    </RadzenGridColumn>
    </Columns>
</RadzenGrid>

<RazorSectionActions TItem=@PluScaleModel ParentRazor=@(this) />
