@inherits RazorComponentSectionBase<PluLabelModel, SqlTableBase>
@page "/section/plus_labels"
@using BlazorCore.Razors
@using BlazorDeviceControl.Razors.SystemComponents

<SystemIdentity ParentRazor=@(this) />

<RazorSectionReload TItem=@PluLabelModel TItemFilter=@SqlTableBase ParentRazor=@(this) Title=@LocaleCore.System.SystemLogs />

<RadzenGrid 
	Style="margin-top: 5px; "
	Data=@SqlItemsCast TItem=@PluLabelModel 
	RowClick=@(SqlItemSetAsync) RowRender=@(args => RowRender(args))
	RowDoubleClick=@(_ => SqlItemEditAsync())
    AllowFiltering=true FilterCaseSensitivity=FilterCaseSensitivity.CaseInsensitive FilterMode="FilterMode.Advanced"
    AllowPaging=true PageSize=@AppSettings.DataAccess.JsonSettingsLocal.SectionRowsCount AllowSorting=true >
    <Columns >
        <RazorSectionFieldIsMarked TItem=@PluLabelModel ParentRazor=@(this) />
        <RadzenGridColumn 
	        TItem=@PluLabelModel Width="20%" Title=@LocaleCore.Table.ChangeDt >
	        <Template Context="itemCast">
		        <RadzenLink 
			        Path=@($"{LocaleCore.DeviceControl.RouteItemPluLabel}/{itemCast.Identity.Uid}") 
			        Text=@itemCast.ChangeDt.ToString("yyyy-MM-dd HH:mm:ss") />
	        </Template>
        </RadzenGridColumn>
        <RadzenGridColumn 
	        TItem=@PluLabelModel Width="20%" Title=@LocaleCore.Table.ChangeDt >
	        <Template Context="itemCast">
		        <RadzenText 
			        TextAlign=@TextAlign.Center TextStyle=@TextStyle.Body2
			        Text=@($"{DataUtils.GetBytesLength(itemCast.Zpl)}") />
	        </Template>
        </RadzenGridColumn>
        @*<RadzenGridColumn 
            TItem=@PluLabelModel Width="20%" Title=@LocaleCore.Table.Scale >
	        <Template Context="itemCast" >
		        
		        <RadzenLink
			        Path=@(itemCast.PluWeighing is null ? string.Empty : 
						$"{LocaleCore.DeviceControl.RouteItemScale}/{itemCast.PluWeighing.PluScale.Scale.Identity.Id}")
			        Text=@(itemCast.PluWeighing is null ? string.Empty : itemCast.PluWeighing.PluScale.Scale.Description)/>
	        </Template>
        </RadzenGridColumn>
        <RadzenGridColumn 
            TItem=@PluLabelModel Title=@LocaleCore.Table.PluNumber Type="string" Width="5%" TextAlign=@TextAlign.Center >
            <Template Context="itemCast" >
                <RadzenLink Style="width: 100%; margin-left: 0; " 
                    Path=@($"{LocaleCore.DeviceControl.UriRouteItem.PluObsolete}/{itemCast.PluId}")
                    Text=@itemCast.PluWeighing.PluScale.Plu.Number.ToString() />
            </Template>
        </RadzenGridColumn>*@
        @*<RadzenGridColumn 
            TItem=@PluLabelModel Width="16%" Title=@LocaleCore.Table.Template >
            <Template Context="itemCast" >
                <RadzenLink 
                    Path=@(itemCast.PluWeighing is null ? string.Empty : $"{LocaleCore.DeviceControl.RouteItemTemplate}/{itemCast.PluWeighing.PluScale.Plu.Template.Identity.Id}")
                    Text=@(itemCast.PluWeighing is null ? string.Empty : itemCast.PluWeighing.PluScale.Plu.Template.Title) />
            </Template>
        </RadzenGridColumn>*@
    </Columns>
</RadzenGrid>

<RazorSectionActions TItem=@PluLabelModel ParentRazor=@(this) />
