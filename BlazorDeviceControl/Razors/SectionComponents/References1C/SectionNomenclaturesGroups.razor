@using DataCore.Sql.TableScaleModels.PlusGroups
@using BlazorDeviceControl.Razors.CustomComponents
@inherits RazorComponentSectionBase<DataCore.Sql.TableScaleModels.PlusGroups.PluGroupModel, SqlTableBase>
@page "/section/nomenclatures_groups"

<RazorSectionReload TItem="@PluGroupModel" TItemFilter="@SqlTableBase" ParentRazor="@(this)" Title="@LocaleCore.DeviceControl.SectionNomenclaturesGroups"
                    SqlCrudConfigSection="@SqlCrudConfigSection"/>

<RadzenDataGridLocal
  @bind-Value="@SelectedRow"
  TItem="@PluGroupModel"
  Data="@SqlSectionCast"
  CellContextMenu="@OnCellContextMenu"
  RowSelect="@(SqlItemSetAsync)"
  RowRender="@RowRender"
  LoadChildData="@LoadChildData"
  RowDoubleClick="@(_ => SqlItemEditAsync())">
  <Columns >
    <RazorSectionFieldIsMarked TItem="@PluGroupModel" ParentRazor="@(this)" SqlCrudConfigSection="@SqlCrudConfigSection"/>
    <RadzenDataGridColumn TItem="@PluGroupModel" Title="@LocaleCore.Table.Name" Width="45%">
      <Template Context="itemCast">
        <RadzenLink Style="width: 100%; margin-left: 0; "
                    Path=@($"{LocaleCore.DeviceControl.RouteItemNomenclatureGroup}/{itemCast.IdentityValueUid}")
                    Text="@itemCast.Name"/>
      </Template>
    </RadzenDataGridColumn>
    <RadzenDataGridColumn TItem="@PluGroupModel" Title="@LocaleCore.Table.Code" Width="20%" Property="Code"/>
    <RadzenDataGridColumn TItem="@PluGroupModel" Title="@LocaleCore.Table.Group" Width="30%">
      <Template Context="itemCast">
        <RadzenText Text="@(DataAccess.GetItemNomenclatureGroupParentNotNullable(itemCast).Name)"
                    TextStyle="@TextStyle.Body2" TextAlign="@TextAlign.Left"/>
      </Template>
    </RadzenDataGridColumn>
  </Columns>
</RadzenDataGridLocal>
