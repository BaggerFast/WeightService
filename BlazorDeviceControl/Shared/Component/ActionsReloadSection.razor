@inherits Shared.Component.ActionsReloadBase
@page "/component/actions_reload_section"
@using DataCore
@using DataCore.Localizations
@using DataCore.Utils
@using static DataCore.ProjectsEnums
@using static DataCore.ShareEnums

<MudElement HtmlTag="h3" Class="ma-0">
    @if (!string.IsNullOrEmpty(@Title))
    {
        <RadzenLabel Style="margin-top: 3px; margin-left: 1%; font-size: 18px; " Text=@Title />
    }
    @if (ParentRazor == null)
    {
        <ActionsLoad ParentRazor=@this DataLoadItem=ShareEnums.ActionLoad.Loading IsShowProgress=true />
    }
    else
    {
        <RadzenLabel Style="margin-top: 3px; margin-left: 1%; font-size: 14px; " 
        Text=@LocaleCore.Action.ActionIsSelectTopRowsCount(AppSettings.DataAccess.JsonSettingsLocal.SelectTopRowsCount) />
        <RadzenCheckBox Disabled=false TValue="bool" @bind-Value=@ParentRazor.IsSelectTopRows
            Change=@(args => OnChangeCheckBox(args, nameof(IsSelectTopRows)))
        />

        <RadzenLabel Style="margin-top: 3px; margin-left: 1%; font-size: 14px; " Text=@LocaleCore.Action.ActionIsShowMarked />
        <RadzenCheckBox Disabled=false TValue="bool" @bind-Value=@ParentRazor.IsShowMarkedItems
            Change=@(args => OnChangeCheckBox(args, nameof(IsShowMarkedItems)))
        />

        <RadzenButton 
            class="radzenButtonShort" ButtonStyle=@ButtonStyle.Primary Icon="refresh"
            Disabled=@(!AppSettings.DataAccess.IsConnected) 
            Click=@(args => SetParameters.InvokeAsync())
            MouseEnter=@(args => TooltipService?.Open(args, LocaleCore.Table.TableRead))
            MouseLeave=@(args => TooltipService?.Close())
        />
        
        <RadzenLabel Style="margin-top: 3px; margin-left: 1%; font-size: 14px; " Text=@ItemsCountResult />
        
        @if (IsShowAdditionalFilter)
        {
            <RadzenLabel Style="margin-top: 3px; margin-left: 1%; font-size: 14px; " Text=@FilterCaption />
            <RadzenDropDown Style="width: 100%;" TValue="string" FilterCaseSensitivity=FilterCaseSensitivity.CaseInsensitive
                AllowFiltering=true AllowClear=true AllowFilteringByAllStringColumns=true
                Data=@ItemsFilter PageSize=@AppSettings.DataAccess.JsonSettingsLocal.ItemRowsCount TextProperty="Name" 
                ValueProperty="Value" Value=@ItemFilter 
                Change=@(args => OnItemValueChange(ItemFilter, FilterName, args)) />
        }
    }
</MudElement>
