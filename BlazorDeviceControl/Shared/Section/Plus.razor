@page "/section/plus"
@page "/section/plus/{ScaleId:long}"
@using BlazorCore.Models
@using DataCore
@using DataCore.DAL.TableScaleModels
@using DataCore.Utils
@using BlazorDeviceControl.Shared.Component
@using BlazorCore
@using static DataCore.ShareEnums
@inherits RazorDisposable

<ActionsReload Title=@LocalizationData.DeviceControl.SectionPlus SetParameters=@SetParametersAsync IsShowItemsCount=true Items=@Items />

<RadzenGrid Style="margin-top: 5px;"
    Data=@ItemsCast TItem="PluEntity"
    RowSelect=@(args => ItemSelectAsync(args)) 
    RowDoubleClick=@(args => ActionAsync(UserSettings, DbTableAction.Edit, false))
    AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" FilterMode="FilterMode.Advanced"
    AllowPaging="true" PageSize=@AppSettings.DataAccess.JsonSettings.SectionRowCount AllowSorting="true" ColumnWidth="100px">
    <Columns>
        <RadzenGridColumn TItem="PluEntity" Property="Id" Title=@LocalizationData.DeviceControl.TableFieldId Width="6%" TextAlign="TextAlign.Center" />
        <RadzenGridColumn TItem="PluEntity" Property="Plu" Title=@LocalizationData.DeviceControl.TableFieldPlu Width="6%" TextAlign="TextAlign.Center" />
        <RadzenGridColumn TItem="PluEntity" Property="Active" Title=@LocalizationData.DeviceControl.TableFieldActive Width="4%" TextAlign="TextAlign.Center">
            <Template Context="pluEntity">
                <RadzenCheckBox TValue="bool" @bind-Value=@pluEntity.Active Disabled=false ReadOnly=true />
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="PluEntity" Property="CheckWeight" Title=@LocalizationData.DeviceControl.TableFieldCheckWeight Width="4%" TextAlign="TextAlign.Center">
            <Template Context="pluEntity">
                <RadzenCheckBox TValue="bool?" @bind-Value="@pluEntity.CheckWeight" Disabled=false ReadOnly=true />
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="PluEntity" Title=@LocalizationData.DeviceControl.TableFieldGoodsName Width="16%">
            <Template Context="pluEntity">
                <RadzenLabel Style="white-space: pre-wrap;" Text=@pluEntity.GoodsName></RadzenLabel>
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="PluEntity" Title=@LocalizationData.DeviceControl.TableFieldTemplate Width="15%">
            <Template Context="pluEntity">
                <RadzenLabel Style="white-space: pre-wrap;" Text=@pluEntity.Templates.Title></RadzenLabel>
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="PluEntity" Property="Gtin" Title=@LocalizationData.DeviceControl.TableFieldGtin Width="10%" />
        <RadzenGridColumn TItem="PluEntity" Property="GtinCheck" Title="" Width="3%" TextAlign="TextAlign.Center">
            <Template Context="pluEntity">
                @if (pluEntity.GtinCheck())
                {
                    <RadzenIcon Icon="" Disabled=false ReadOnly=true />
                }
                else
                {
                    <RadzenIcon Icon="announcement" Disabled=false ReadOnly=true />
                }
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="PluEntity" Title=@LocalizationData.DeviceControl.TableFieldNomenclatureName Width="15%">
            <Template Context="pluEntity">
                <RadzenLabel Style="white-space: pre-wrap;" Text=@pluEntity.Nomenclature.Name></RadzenLabel>
            </Template>
        </RadzenGridColumn>
        <RadzenGridColumn TItem="PluEntity" Property="GoodsShelfLifeDays" Title=@LocalizationData.DeviceControl.TableFieldShelfLifeDays Width="5%" />
        <RadzenGridColumn TItem="PluEntity" Property="GoodsTareWeight" Title=@LocalizationData.DeviceControl.TableFieldGoodsTareWeight Width="5%" />
        <RadzenGridColumn TItem="PluEntity" Property="GoodsBoxQuantly" Title=@LocalizationData.DeviceControl.TableFieldGoodsBoxQuantly Width="5%" />
    </Columns>
</RadzenGrid>

<ActionsButtons ParentRazor=@this ButtonSettings=@ButtonSettings />
