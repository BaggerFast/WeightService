@page "/item/printer"
@page "/item/printer/{Id:int}"
@using BlazorCore
@using DataCore
@using DataCore.DAL.TableModels
@using DataCore.Utils
@using BlazorDeviceControl.Shared.Component
@using BlazorDeviceControl.Shared.Section
@inherits DataCore.Models.BaseRazorIdEntity
@inject IDialogService DialogService

@if (AppSettings.IdentityItem.AccessLevel is true or false)
{
    <DataReload Title=@LocalizationData.DeviceControl.ItemPrinter SetParameters=@SetParametersAsync />
    @if (Item == null)
    {
        <DataLoad DataLoadItem=EnumDataLoad.Loading IsShowProgress=true />
    }
    else
    {
        <MudSimpleTable Style="overflow-x: auto; " Dense=true Bordered=true FixedHeader=false>
            <thead>
                <tr>
                    <th Style="color:blue; font-weight:bold;">@LocalizationCore.Strings.RecordName</th>
                    <th Style="color:blue; font-weight:bold;">@LocalizationCore.Strings.RecordValue</th>
                    <th Style="color:blue; font-weight:bold;">@LocalizationCore.Strings.RecordName</th>
                    <th Style="color:blue; font-weight:bold;">@LocalizationCore.Strings.RecordValue</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>@LocalizationData.DeviceControl.TableFieldName</td>
                    <td>
                        <RadzenTextBox Style="width: 100%; text-align: center; " Disabled="false" 
                            TValue="string" @bind-Value=@PrinterItem.Name />
				    </td>
                    <td>@LocalizationData.DeviceControl.TableFieldPrinterMac</td>
                    <td>
                        <RadzenTextBox Style="width: 100%; text-align: center; " Disabled="false" 
                            TValue="string" @bind-Value=@PrinterItem.Mac />
				    </td>
                </tr>
                <tr>
                    <td>@LocalizationData.DeviceControl.TableFieldPrinter</td>
                    <td>
                        <RadzenLink Style="width: 100%; text-align: center; margin-left: 5px; " Disabled="false" 
                            TValue="string" Target="_blank" Path=@PrinterItem.Link 
                            Text=@LocalizationData.DeviceControl.TableFieldPrinterControlPanel />
				    </td>
                    <td>@LocalizationData.DeviceControl.TableFieldPrinterPort</td>
                    <td>
                        <RadzenNumeric Style="width: 100%; text-align: center;" Disabled="false" 
                            TValue="short" @bind-Value=@PrinterItem.Port />
				    </td>
                </tr>
                <tr>
                    <td>@LocalizationData.DeviceControl.TableFieldPrinterPassword</td>
                    <td>
                        <RadzenTextBox Style="width: 100%; text-align: center;" Disabled="false" 
                            TValue="string" @bind-Value=@PrinterItem.Password />
				    </td>
                    <td>@LocalizationData.DeviceControl.TableFieldPrinterIp</td>
                    <td>
                        <RadzenTextBox Style="width: 100%; text-align: center;" Disabled="false" 
                            TValue="string" @bind-Value=@PrinterItem.Ip />
				    </td>
                </tr>
                <tr>
                    <td>@LocalizationData.DeviceControl.TableFieldPrinterType</td>
                    <td>
                        @if (PrinterTypeItems == null)
                        {
                            <DataLoad DataLoadItem=EnumDataLoad.None IsShowProgress=true />
                        }
                        else
                        {
                            <RadzenDropDownDataGrid 
                                Style="width: 100%;" TValue="int"
                                FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                                AllowFiltering="true" AllowClear="true" AllowFilteringByAllStringColumns="true"
                                Data=@PrinterTypeItems PageSize="10"
                                TextProperty="Name" ValueProperty="Id"
                                Value=@PrinterItem.PrinterType?.Id
                                Change=@(args => OnChange(args, nameof(PrinterTypeEntity), PrinterItem)) />
                        }
				    </td>
                </tr>
            </tbody>
        </MudSimpleTable>
        <PrinterResources Table=@Table PrinterId=@Id />
        <ItemSave Table=@Table Id=@Id />
        <ItemDates Table=@Table Id=@Id />
    }
}
else
{
    <RadzenLabel Text=@LocalizationCore.Strings.SectionAccessDeny></RadzenLabel>
}
