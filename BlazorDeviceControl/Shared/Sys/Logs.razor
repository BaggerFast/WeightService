@page "/system/logs"
@using BlazorProjectsCore
@using BlazorProjectsCore.DAL.DataModels
@using DataProjectsCore
@using DataProjectsCore.DAL.DataModels
@using DataProjectsCore.Utils
@using BlazorDeviceControl.Shared.Component
@using BlazorDeviceControl.Shared.Item
@using BlazorDeviceControl.Shared.Section
@inherits             BaseRazorUidEntity

@if (AppSettings.IdentityItem.AccessLevel is true or false)
{
    <DataReload Title=@LocalizationCore.Strings.SysLogs SetParameters=@SetParametersAsync IsShowItemsCount=true 
        ItemsCount=@ItemsCount />
    <RadzenGrid Style="margin-top: 5px; "
        Data=@Items TItem="LogSummaryEntity"
        RowSelect=@(args => ItemSelectAsync(args))
        AllowFiltering="true" FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive" FilterMode="FilterMode.Advanced"
        AllowPaging="true" PageSize=@AppSettings.JsonAppSettings.SectionRowCount AllowSorting="true" ColumnWidth="100px">
        <Columns >
            <RadzenGridColumn 
                TItem="LogSummaryEntity" TextAlign="TextAlign.Center"
                Title=@LocalizationData.DeviceControl.TableFieldCreateDt Type="date" Width="13%" >
                <Template Context="logItem" >
                    <RadzenDatePicker 
                        Style="height: 80%; width=80%; " 
                        TValue="string" Value=@logItem.CreateDt Disabled="true" DateFormat="yyyy-MM-dd HH:mm:ss" />
                </Template>
            </RadzenGridColumn>
            <RadzenGridColumn 
                TItem="LogSummaryEntity" Property="Host" TextAlign="TextAlign.Left"
                Title=@LocalizationData.DeviceControl.TableFieldHost Type="string" Width="9%" />
            <RadzenGridColumn 
                TItem="LogSummaryEntity" Property="App" TextAlign="TextAlign.Left"
                Title=@LocalizationData.DeviceControl.TableFieldApp Type="string" Width="7%" />
            <RadzenGridColumn 
                TItem="LogSummaryEntity" TextAlign="TextAlign.Center"
                Title=@LocalizationData.DeviceControl.TableFieldVersion Type="string" Width="7%">
                <Template Context="logItem">
                    <RadzenLabel 
                        Style="height: 80%; width=80%; white-space: normal; " 
                        Text=@logItem.Version Disabled="true" />
                </Template>
            </RadzenGridColumn>
            <RadzenGridColumn 
                TItem="LogSummaryEntity" Property="File" TextAlign="TextAlign.Left"
                Title=@LocalizationData.DeviceControl.TableFieldFile Type="string" Width="10%" />
            <RadzenGridColumn 
                TItem="LogSummaryEntity" TextAlign="TextAlign.Center"
                Title=@LocalizationData.DeviceControl.TableFieldRow Type="int" Width="5%">
                <Template Context="logItem">
                    <RadzenLabel 
                        Style="height: 80%; width=80%; " 
                        Text=@logItem.Line.ToString() Disabled="true" />
                </Template>
            </RadzenGridColumn>
            <RadzenGridColumn 
                TItem="LogSummaryEntity" Property="Member" TextAlign="TextAlign.Left"
                Title=@LocalizationData.DeviceControl.TableFieldMember Type="string" Width="15%" />
            <RadzenGridColumn 
                TItem="LogSummaryEntity" Property="Icon" TextAlign="TextAlign.Left"
                Title=@LocalizationData.DeviceControl.TableFieldIcon Type="string" Width="7%" />
            <RadzenGridColumn 
                TItem="LogSummaryEntity" Property="Message" TextAlign="TextAlign.Left"
                Title=@LocalizationData.DeviceControl.TableFieldMessage Type="string" Width="27%">
                <Template Context="logItem">
                    <RadzenLabel 
                        Style="height: 80%; width=80%; white-space: pre-wrap; " 
                        Text=@logItem.Message Disabled="false" />
                </Template>
            </RadzenGridColumn>
        </Columns>
    </RadzenGrid>
    @if (Items == null)
    {
        <DataLoad DataLoadItem=EnumDataLoad.Loading IsShowProgress=true />
    }
    else
    {
        <SectionActions />
    }
}
else
{
    <RadzenLabel Text=@LocalizationCore.Strings.SectionAccessDeny></RadzenLabel>
}
