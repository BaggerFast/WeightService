@page "/"
@namespace BlazorDeviceControl.Pages
@using BlazorCore.Razors
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = "_Layout";
}

<component type="typeof(App)" render-mode="ServerPrerendered" />

@{
	UserSettingsModel userSettings = new();
	if (HttpContext.Connection.RemoteIpAddress is null)
	{
		userSettings.IpAddress = string.Empty;
	}
	else
	{
		if (HttpContext.Connection.RemoteIpAddress.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork)
			userSettings.IpAddress = HttpContext.Connection.RemoteIpAddress.ToString();
		else
			userSettings.IpAddress = HttpContext.Connection.RemoteIpAddress.AddressFamily.ToString();
	}
	userSettings.Id = HttpContext.Connection.Id;
}
