@attribute [Authorize(Roles = UserAccessStr.Read)]
@inherits RazorComponentSectionBase<PrinterResourceFkModel>
@using DataCore.Sql.TableScaleFkModels.PrintersResourcesFks
@using BlazorDeviceControl.Pages.CustomComponents

@if (SqlSectionCast.Count > 0)
{
  <SectionReload
    TItem="@PrinterResourceFkModel"
    Title="@LocaleCore.Print.Resources"
    OnSectionUpdate="@GetSectionData"
    SectionCount="@SqlSectionCast.Count"
    SqlCrudConfigSection="@SqlCrudConfigSection"
    ButtonSettings="@ButtonSettings"
  />

  <RzDataGridLocal
    @bind-Value="@SelectedRow"
    TItem="@PrinterResourceFkModel"
    Data="@SqlSectionCast"
    CellContextMenu="@OnCellContextMenu"
    RowSelect="@SqlItemSet"
    RowRender="@RowRender"
    RowDoubleClick="@SqlItemEditAsync">
    <Columns>
      <TItemContent TItem="@PrinterResourceFkModel">
        <SectionFieldIsMarked SqlCrudConfigSection="@SqlCrudConfigSection"/>
        <RadzenDataGridColumn Title="@LocaleCore.Table.Name" Property="Printer.Name" Width="32%" />
        <RadzenDataGridColumn Title="@LocaleCore.Print.TemplateResource" Property="TemplateResource.Name" Width="32%" />
      </TItemContent>
    </Columns>
  </RzDataGridLocal>
}
else
{
  <h3>У принтера не загружены ресурсы</h3>
}
