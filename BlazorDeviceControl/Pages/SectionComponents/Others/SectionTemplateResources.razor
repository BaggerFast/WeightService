@using DataCore.Sql.TableScaleModels.TemplatesResources
@using BlazorDeviceControl.Pages.CustomComponents
@inherits RazorComponentSectionBase<TemplateResourceModel>
@page "/section/templates_resources"
@attribute [Authorize(Roles = UserAccessStr.Read)]

<RazorSectionReload
  TItem="@TemplateResourceModel"
  Title="@LocaleCore.DeviceControl.SectionTemplateResources"
  OnSectionUpdate="@GetSectionData"
  SectionCount="@SqlSectionCast.Count"
  SqlCrudConfigSection="@SqlCrudConfigSection"
  ButtonSettings="@ButtonSettings"
/>

<RadzenDataGridLocal
  @bind-Value="@SelectedRow"
  TItem="@TemplateResourceModel"
  Data="@SqlSectionCast"
  CellContextMenu="@OnCellContextMenu"
  RowSelect="@SqlItemSet"
  RowRender="@RowRender"
  RowDoubleClick="@SqlItemEditAsync">
  <Columns>
      <TItemContent TItem="@TemplateResourceModel">
        <RazorSectionFieldIsMarked SqlCrudConfigSection="@SqlCrudConfigSection" />
        <RadzenDataGridColumn Title="@LocaleCore.Table.Type" Property="Type" Width="20%" />
        <RadzenDataGridColumn Title="@LocaleCore.Table.Name" Property="Name" Width="55%" />
        <RadzenDataGridColumn Title="@LocaleCore.Table.Size" SortProperty="DataValue.Length" Width="20%">
            <Template Context="itemCast">
              <RadzenText Text="@ConvertBytes(itemCast)" />
            </Template>
        </RadzenDataGridColumn>
      </TItemContent>
  </Columns>
</RadzenDataGridLocal>
