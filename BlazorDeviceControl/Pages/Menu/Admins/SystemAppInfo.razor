@page "/system/appinfo"
@attribute [Authorize(Roles = UserAccessStr.Admin)]
@inherits RazorComponentBase
@using BlazorDeviceControl.Pages.ItemComponents

<MudElement HtmlTag="h3" Class="ma-0">@LocaleCore.System.SystemInfo</MudElement>
<MudSimpleTable Style="overflow-x: auto; " Dense="true" Bordered="true" FixedHeader="false">
<RazorItemTableHead CssTableStyleHead="@RzComponentUtils.GetTableHeadStyleInfo()"/>
<tbody>
<tr>
  <td>DeviceControl / BlazorCore/ DataCore</td>
  <td colspan="2">@($"v{VerApp} / v{VerLibBlazorCore} / v{VerLibDataCore}")</td>
</tr>
<tr>
  <td>@LocaleCore.Strings.HostName</td>
  <td colspan="2">@Environment.MachineName</td>
</tr>
<tr>
  <td>@LocaleCore.Sql.SqlServer</td>
  <td colspan="2">@DataAccess.JsonSettings.Local.Sql.DataSource</td>
</tr>
<tr>
  <td>@LocaleCore.Sql.SqlDb</td>
  <td colspan="2">@DataAccess.JsonSettings.Local.Sql.InitialCatalog</td>
</tr>
<tr>
  <td>
    @if (DataAccess.JsonSettings.Local.Sql.PersistSecurityInfo)
    {
      @LocaleCore.System.SystemWindowsUser
    }
    else
    {
      @LocaleCore.Sql.SqlUser
    }
  </td>
  <td colspan="2">@DataAccess.JsonSettings.Local.Sql.UserId</td>
</tr>
<tr>
  <td>@LocaleCore.Strings.DbAndMemory</td>
  <td>@DbCurSizeAsString</td>
  <td>@BlazorAppSettings.MemoryInfo</td>
</tr>
<tr>
  <td>@LocaleCore.Strings.DbAndMemoryProgressBar</td>
  <td><RadzenProgressBar Style="color: black; font-weight: bold" Value="@DbFillSize" ShowValue="true"/></td>
  <td><RadzenProgressBar Style="color: black; font-weight: bold" Value="@BlazorAppSettings.MemoryFillSize" ShowValue="true"/></td>
</tr>
<tr style="height: 200px; ">
  <td>@LocaleCore.Strings.DbAndMemoryGauge</td>
  <td>
    <RadzenRadialGauge>
        <RadzenRadialGaugeScale StartAngle="-150" EndAngle="150" Step="1024" Min="0" Max="@DbMaxSize"
                                TickPosition="@GaugeTickPosition.Inside">
          <RadzenRadialGaugeScalePointer Length="0.7" ShowValue="true" Value="@DbFileSizeAll">
            <Template Context="pointer">
              <h4>
                @pointer.Value<sup>MB</sup>
              </h4>
            </Template>
          </RadzenRadialGaugeScalePointer>
          <RadzenRadialGaugeScaleRange From="0" To="@(DbMaxSize * 0.75)" Fill="green"/>
          <RadzenRadialGaugeScaleRange From="@(DbMaxSize * 0.75)" To="@(DbMaxSize * 0.9)" Fill="orange"/>
          <RadzenRadialGaugeScaleRange From="@(DbMaxSize * 0.9)" To="@DbMaxSize" Fill="red"/>
        </RadzenRadialGaugeScale>
      </RadzenRadialGauge>
  </td>
  <td>
    <RadzenRadialGauge>
        <RadzenRadialGaugeScale StartAngle="-150" EndAngle="150" Step="1024" Min="0" Max="@TotalRamSize"
                                TickPosition="@GaugeTickPosition.Inside">
          <RadzenRadialGaugeScalePointer Value="@CurrentRamSize" Length="0.7" ShowValue="true">
            <Template Context="pointer">
              <h4>@pointer.Value<sup>MB</sup></h4>
            </Template>
          </RadzenRadialGaugeScalePointer>
          <RadzenRadialGaugeScaleRange From="0" To="@(TotalRamSize*0.75)" Fill="green"/>
          <RadzenRadialGaugeScaleRange From="@(TotalRamSize*0.75)" To="@(TotalRamSize*0.9)" Fill="orange"/>
          <RadzenRadialGaugeScaleRange From="@(TotalRamSize*0.9)" To="@TotalRamSize" Fill="red"/>
        </RadzenRadialGaugeScale>
      </RadzenRadialGauge>
  </td>
</tr>
<tr>
  <td>@LocaleCore.Settings.SectionAndItemRowsCount</td>
  <td>@DataAccess.JsonSettings.Local.SectionRowsCount</td>
  <td>@DataAccess.JsonSettings.Local.ItemRowsCount</td>
</tr>
<tr>
  <td>@LocaleCore.Settings.SelectTopRowsCount</td>
  <td colspan="2">@DataAccess.JsonSettings.Local.SelectTopRowsCount</td>
</tr>
<tr>
  <td>@LocaleCore.Settings.Version</td>
  <td colspan="2">@DataAccess.JsonSettings.Local.Version</td>
</tr>
<tr>
  <td>@LocaleCore.Settings.AllowedHosts</td>
  <td colspan="2">@DataAccess.JsonSettings.Local.AllowedHosts</td>
</tr>
</tbody>
</MudSimpleTable>
