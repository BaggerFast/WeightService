@page "/nomenclatures"
@using MdmControlBlazor.Utils
@using MdmControlCore
@using MdmControlCore.Utils
@inherits MdmControlBlazor.Data.BaseRazorEntity

@*
<div class="row col-sm-12 col-md-12 col-lg-12" style="margin-top: -5px; margin-left: -5px; margin-right: -5px; margin-bottom: -5px; ">
    <div class="row col-sm-6 col-md-6 col-lg-6" style="margin-top: 10px; margin-left: -35px; margin-right: -35px; margin-bottom: -5px; ">
        <div class="row col-sm-11 col-md-11 col-lg-11" style="margin-top: -5px; margin-left: -35px; margin-right: -35px; margin-bottom: -5px; ">
            <div class="row col-sm-3 col-md-3 col-lg-3" style="margin-top: -5px; margin-left: -10px; margin-right: 0px; margin-bottom: 0px; ">
                <h10 style="text-align: center; ">@LocalizationStrings.TableTitleNomenclatureMaster</h10>
            </div>
            <div class="row col-sm-6 col-md-6 col-lg-6" style="margin-top: -5px; margin-left: -10px; margin-right: 0px; margin-bottom: 0px; ">
                <RadzenButton Click=@(_ => GetDataAsync(ShareEnums.TableDwh.NomenclatureMaster))
                              Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                              Icon="refresh"
                              ButtonStyle="ButtonStyle.Light"
                              Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                              MouseEnter="@(args => BlazorSettings.ShowTooltipMasterGet(args))" />
                <RadzenButton Click=@(_ => ActionEditAsync(ShareEnums.TableDwh.NomenclatureMaster, ItemMaster, true))
                              Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                              Icon="edit"
                              ButtonStyle="ButtonStyle.Light"
                              Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                              MouseEnter="@(args => BlazorSettings.ShowTooltipMasterEdit(args))" />
                <RadzenButton Click=@(_ => ClearEntityAsync(ShareEnums.TableDwh.NomenclatureMaster))
                              Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                              Icon="clear"
                              ButtonStyle="ButtonStyle.Light"
                              Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                              MouseEnter="@(args => BlazorSettings.ShowTooltipMasterClear(args))" />
                <br />
            </div>
            <div class="row col-sm-3 col-md-3 col-lg-3" style="margin-top: -5px; margin-left: 5px; margin-right: 0px; margin-bottom: 0px; ">
                <h10 style="text-align: center; ">@ItemsMasterCount</h10>
            </div>
            <br />
            @if (ItemsMaster == null)
            {
                <RadzenLabel Text=@LocalizationStrings.DataLoading
                             Style="width: 20%; margin-top: 30px; margin-left: 10px; position: absolute; " />
                <RadzenProgressBar Value="100" ShowValue="false" Mode="ProgressBarMode.Indeterminate"
                                   Style="width: 80%; margin-top: 30px; margin-left: 175px; position: absolute; " />
            }
            else
            {
                <RadzenGrid Style="font-size: 10px; margin-top: 30px; margin-left: 0px; margin-right: -30px; margin-bottom: -5px; position: absolute; "
                            Data=@ItemsMaster TItem="NomenclatureLightEntity" @bind-Value=@ItemObject
                            RowDoubleClick=@(args => RowDoubleClickAsync(ShareEnums.TableDwh.NomenclatureMaster, args, true))
                            AllowFiltering="true" FilterCaseSensitivity=FilterCaseSensitivity.CaseInsensitive FilterMode="FilterMode.Advanced"
                            AllowPaging="true" PageSize=@BlazorSettings.GridPageSize AllowSorting="true" ColumnWidth="50px"
                            AllowColumnResize="true" SelectionMode="DataGridSelectionMode.Single"
                            @bind-Value=@ObjectMaster>
                    <Columns>
                        <RadzenGridColumn TItem="NomenclatureLightEntity" Property="Code" Title=@LocalizationStrings.TableFieldCode
                                          Type="string" Width="20%" Sortable="true" />
                        <RadzenGridColumn TItem="NomenclatureLightEntity" Property="ParentConvert" Title=@LocalizationStrings.TableFieldParent
                                          Type="string" Width="30%" Sortable="false">
                            <Template Context="nomenclature">
                                <RadzenLabel Style="height: 10px; " Text=@nomenclature?.ParentConvert?.Parents?[0] />
                            </Template>
                        </RadzenGridColumn>
                        <RadzenGridColumn TItem="NomenclatureLightEntity" Property="Name" Title=@LocalizationStrings.TableFieldName
                                          Type="string" Width="50%" Sortable="true" />
                    </Columns>
                </RadzenGrid>
            }
        </div>
        <div class="row col-sm-1 col-md-1 col-lg-1" style="margin-top: -5px; margin-left: 55px; margin-right: 0px; margin-bottom: -5px; ">
            <RadzenButton Click=@MasterRecordCreateAsync
                          Style="margin-top: 30px; margin-bottom: 0px; width: 35px; height: 35px; text-align: center;"
                          Icon="add"
                          ButtonStyle="ButtonStyle.Primary"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipMasterCreate(args))">
            </RadzenButton>
            <RadzenButton Click=@MasterRecordIncludeAsync
                          Style="margin-top: 5px; margin-bottom: 0px; width: 35px; height: 35px; text-align: center;"
                          Icon="arrow_circle_up"
                          ButtonStyle="ButtonStyle.Primary"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipMasterInclude(args))" />
            <RadzenButton Click=@MasterRecordDeleteAsync
                          Style="margin-top: 5px; margin-bottom: 0px; width: 35px; height: 35px; text-align: center;"
                          Icon="delete"
                          ButtonStyle="ButtonStyle.Primary"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipMasterDelete(args))" />
            <br />
        </div>
    </div>
    <div class="row col-sm-6 col-md-6 col-lg-6" style="margin-top: 10px; margin-left: -15px; margin-right: -115px; margin-bottom: -5px; ">
        <div class="row col-sm-3 col-md-3 col-lg-3" style="margin-top: -5px; margin-left: -10px; margin-right: 0px; margin-bottom: 0px; ">
            <h10 style="text-align: center; ">@LocalizationStrings.TableTitleNomenclatureNonNormalize</h10>
        </div>
        <div class="row col-sm-6 col-md-6 col-lg-6" style="margin-top: -10px; margin-left: -10px; margin-right: 0px; margin-bottom: 0px; ">
            <RadzenButton Click=@(_ => GetDataAsync(ShareEnums.TableDwh.NomenclatureNonNormalize))
                          Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                          Icon="refresh"
                          ButtonStyle="ButtonStyle.Light"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipNonNormalizeGet(args))" />
            <RadzenButton Click=@(_ => ActionEditAsync(ShareEnums.TableDwh.NomenclatureNonNormalize, ItemNonNormilize, true))
                          Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                          Icon="edit"
                          ButtonStyle="ButtonStyle.Light"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipNonNormalizeEdit(args))" />
            <RadzenButton Click=@(_ => ClearEntityAsync(ShareEnums.TableDwh.NomenclatureNonNormalize))
                          Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                          Icon="clear"
                          ButtonStyle="ButtonStyle.Light"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipNonNormalizeClear(args))" />
            <RadzenButton Click=@(_ => OnChangeIsProduct())
                          Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                          Icon="check_circle"
                          ButtonStyle="ButtonStyle.Light"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipNonNormalizeSetIsProduct(args, UseIsProductNonNormilize))" />
            <RadzenButton Click=@(_ => SetEntityRelevanceAsync(ShareEnums.TableDwh.NomenclatureNonNormalize, 1))
                          Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                          Icon="add"
                          ButtonStyle="ButtonStyle.Light"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipNonNormalizeSetRelevanceTrue(args))" />
            <RadzenButton Click=@(_ => SetEntityRelevanceAsync(ShareEnums.TableDwh.NomenclatureNonNormalize, 2))
                          Style="margin-top: -5px; margin-left: 5px; width: 35px; height: 35px; text-align: center;"
                          Icon="remove"
                          ButtonStyle="ButtonStyle.Light"
                          Disabled=@BlazorSettings.SqlDataAccess.IsDisabled
                          MouseEnter="@(args => BlazorSettings.ShowTooltipNonNormalizeSetRelevanceFalse(args))" />
            <br />
        </div>
        <div class="row col-sm-3 col-md-3 col-lg-3" style="margin-top: -5px; margin-left: 5px; margin-right: 0px; margin-bottom: 0px; ">
            <h10 style="text-align: center; ">@ItemsNonNormilizeCount</h10>
        </div>
        <br />
        @if (ItemsNonNormilize == null)
        {
            <RadzenLabel Text=@LocalizationStrings.DataLoading
                         Style="width: 20%; margin-top: 30px; margin-left: 10px; position: absolute; " />
            <RadzenProgressBar Value="100" ShowValue="false" Mode="ProgressBarMode.Indeterminate"
                               Style="width: 80%; margin-top: 30px; margin-left: 175px; position: absolute; " />
        }
        else
        {
            <RadzenGrid Style="font-size: 10px; margin-top: 25px; margin-left: 0px; margin-right: -115px; margin-bottom: 0px; position: absolute; "
                        Data=@ItemsNonNormilize TItem="NomenclatureLightEntity" @bind-Value=@ItemObject
                        AllowFiltering="true" FilterCaseSensitivity=FilterCaseSensitivity.CaseInsensitive FilterMode="FilterMode.Advanced"
                        AllowPaging="true" PageSize=@BlazorSettings.GridPageSize AllowSorting="true" ColumnWidth="50px"
                        AllowColumnResize="true" SelectionMode="DataGridSelectionMode.Single"
                        @bind-Value=@ObjectNonNormilize>
                <Columns>
                    <RadzenGridColumn TItem="NomenclatureLightEntity" Property="Code" Title=@LocalizationStrings.TableFieldCode
                                      Type="string" Width="14%" Sortable="true" />
                    <RadzenGridColumn TItem="NomenclatureLightEntity" Property="InformationSystem.Name" Title=@LocalizationStrings.TableFieldInformationSystem
                                      Type="string" Width="17%" Sortable="true" />
                    <RadzenGridColumn TItem="NomenclatureLightEntity" Property="ParentConvert" Title=@LocalizationStrings.TableFieldParent
                                      Type="string" Width="20%" Sortable="false">
                        <Template Context="nomenclature">
                            <RadzenLabel Style="height: 10px; " Text=@nomenclature.ParentConvert?.Parents?[0] />
                        </Template>
                    </RadzenGridColumn>
                    <RadzenGridColumn TItem="NomenclatureLightEntity" Property="Name" Title=@LocalizationStrings.TableFieldName
                                      Type="string" Width="42%" Sortable="true" />
                    <RadzenGridColumn TItem="NomenclatureLightEntity" Property="ParentConvert" Title=@LocalizationStrings.TableFieldRelevanceStatus
                                      Type="string" Width="5%" Sortable="false">
                        <Template Context="nomenclature">
                            <RadzenCheckBox Value=@UtilsEnum.GetEnumRelevanceStatusBool(nomenclature.RelevanceStatus) TValue="bool?" Disabled=false ReadOnly=true 
                                            Style="text-align: center;" />
                        </Template>
                    </RadzenGridColumn>
                </Columns>
            </RadzenGrid>
        }
    </div>
</div>
*@